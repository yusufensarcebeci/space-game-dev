{"version":3,"sources":["file:///D:/CocosProjects/bionluk/muratcanko/SpaceGame_Dev/assets/scripts/Player.ts"],"names":["_decorator","clamp","Component","Vec3","JoystickController","Camera","ccclass","property","Player","Number","xMin","xMax","yMin","yMax","resetPlayer","node","setPosition","update","dt","joystickController","direction","getDirection","length","moveVector","x","y","multiplyScalar","movementSpeed","newPosition","getPosition","add","lateUpdate","camera","follow"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,I,OAAAA,I;;AACpCC,MAAAA,kB,iBAAAA,kB;;AACAC,MAAAA,M,iBAAAA,M;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;wBAGjBQ,M,WADZF,OAAO,CAAC,QAAD,C,UAELC,QAAQ;AAAA;AAAA,mD,UACRA,QAAQ;AAAA;AAAA,2B,UACRA,QAAQ,CAACE,MAAD,C,2BAJX,MACaD,MADb,SAC4BN,SAD5B,CACsC;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAKnBQ,IALmB,GAKJ,CAAC,CALG;AAAA,eAMnBC,IANmB,GAMJ,CANI;AAAA,eAOnBC,IAPmB,GAOJ,CAAC,CAPG;AAAA,eAQnBC,IARmB,GAQJ,CARI;AAAA;;AAU7BC,QAAAA,WAAW,GAAE;AAClB,eAAKC,IAAL,CAAUC,WAAV,CAAsB,IAAIb,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,CAAtB;AACD;;AAESc,QAAAA,MAAM,CAACC,EAAD,EAAmB;AACjC,cAAI,KAAKC,kBAAT,EAA6B;AAC3B,kBAAMC,SAAS,GAAG,KAAKD,kBAAL,CAAwBE,YAAxB,EAAlB;;AACA,gBAAID,SAAS,CAACE,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,oBAAMC,UAAU,GAAG,IAAIpB,IAAJ,CAASiB,SAAS,CAACI,CAAnB,EAAsBJ,SAAS,CAACK,CAAhC,EAAmC,CAAnC,EAAsCC,cAAtC,CACjB,KAAKC,aAAL,GAAqBT,EADJ,CAAnB;AAGA,oBAAMU,WAAW,GAAG,KAAKb,IAAL,CAAUc,WAAV,GAAwBC,GAAxB,CAA4BP,UAA5B,CAApB;AAEAK,cAAAA,WAAW,CAACJ,CAAZ,GAAgBvB,KAAK,CAAC2B,WAAW,CAACJ,CAAb,EAAgB,KAAKd,IAArB,EAA2B,KAAKC,IAAhC,CAArB;AACAiB,cAAAA,WAAW,CAACH,CAAZ,GAAgBxB,KAAK,CAAC2B,WAAW,CAACH,CAAb,EAAgB,KAAKb,IAArB,EAA2B,KAAKC,IAAhC,CAArB;AAEA,mBAAKE,IAAL,CAAUC,WAAV,CAAsBY,WAAtB;AACD;AACF;AACF;;AAESG,QAAAA,UAAU,CAACb,EAAD,EAAmB;AACrC,eAAKc,MAAL,CAAYC,MAAZ,CAAmB,KAAKlB,IAAxB;AACD;;AAjCmC,O;;;;;iBACmC,I;;;;;;;iBACpC,I;;;;;;;iBACO,E","sourcesContent":["import { _decorator, clamp, Component, Node, Vec3 } from \"cc\";\r\nimport { JoystickController } from \"./JoystickController\";\r\nimport { Camera } from \"./Camera\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass(\"Player\")\r\nexport class Player extends Component {\r\n  @property(JoystickController) joystickController: JoystickController = null;\r\n  @property(Camera) camera: Camera = null;\r\n  @property(Number) movementSpeed: number = 10;\r\n\r\n  private readonly xMin: number = -7;\r\n  private readonly xMax: number = 7;\r\n  private readonly yMin: number = -7;\r\n  private readonly yMax: number = 7;\r\n\r\n  public resetPlayer(){\r\n    this.node.setPosition(new Vec3(0, 0, 0));\r\n  }\r\n\r\n  protected update(dt: number): void {\r\n    if (this.joystickController) {\r\n      const direction = this.joystickController.getDirection();\r\n      if (direction.length() > 0) {\r\n        const moveVector = new Vec3(direction.x, direction.y, 0).multiplyScalar(\r\n          this.movementSpeed * dt\r\n        );\r\n        const newPosition = this.node.getPosition().add(moveVector);\r\n        \r\n        newPosition.x = clamp(newPosition.x, this.xMin, this.xMax);\r\n        newPosition.y = clamp(newPosition.y, this.yMin, this.yMax);\r\n\r\n        this.node.setPosition(newPosition);\r\n      }\r\n    }\r\n  }\r\n\r\n  protected lateUpdate(dt: number): void {\r\n    this.camera.follow(this.node);\r\n  }\r\n}\r\n"]}