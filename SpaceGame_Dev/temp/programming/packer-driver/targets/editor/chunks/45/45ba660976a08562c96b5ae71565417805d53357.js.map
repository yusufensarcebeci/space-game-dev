{"version":3,"sources":["file:///D:/CocosProjects/bionluk/muratcanko/SpaceGame/SpaceGame3D/assets/scripts/ScoreHandler.ts"],"names":["_decorator","Component","Label","Node","GameManager","GameState","ccclass","property","ScoreHandler","Number","score","elapsedTime","getScore","resetScore","update","dt","gameManager","currentState","GAME_RUNNING","incrementInterval","incrementScore","updateScoreLabel","scoreLabel","label","getComponent","string","updategameOverScoreLabel","gameOverScoreLabel"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;;AACpCC,MAAAA,W,iBAAAA,W;AAAaC,MAAAA,S,iBAAAA,S;;;;;;;;;OAChB;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;8BAGjBQ,Y,WADZF,OAAO,CAAC,cAAD,C,UAELC,QAAQ;AAAA;AAAA,qC,UACRA,QAAQ,CAACJ,IAAD,C,UACRI,QAAQ,CAACJ,IAAD,C,UACRI,QAAQ,CAACE,MAAD,C,2BALX,MACaD,YADb,SACkCP,SADlC,CAC4C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAMnCS,KANmC,GAMnB,CANmB;AAAA,eAOlCC,WAPkC,GAOZ,CAPY;AAAA;;AASnCC,QAAAA,QAAQ,GAAG;AAChB,iBAAO,KAAKF,KAAZ;AACD;;AAEMG,QAAAA,UAAU,GAAG;AAClB,eAAKH,KAAL,GAAa,CAAb;AACA,iBAAO,KAAKA,KAAZ;AACD;;AAESI,QAAAA,MAAM,CAACC,EAAD,EAAa;AAC3B,cAAI,KAAKC,WAAL,CAAiBC,YAAjB,IAAiC;AAAA;AAAA,sCAAUC,YAA/C,EAA6D;AAE7D,eAAKP,WAAL,IAAoBI,EAApB;;AACA,cAAI,KAAKJ,WAAL,IAAoB,KAAKQ,iBAA7B,EAAgD;AAC9C,iBAAKR,WAAL,IAAoB,KAAKQ,iBAAzB;AACA,iBAAKC,cAAL;AACA,iBAAKC,gBAAL;AACD;AACF;;AAEOD,QAAAA,cAAc,GAAG;AACvB,eAAKV,KAAL,IAAc,CAAd,CADuB,CAEvB;AACD;;AAEOW,QAAAA,gBAAgB,GAAG;AACzB,cAAI,KAAKC,UAAT,EAAqB;AACnB,kBAAMC,KAAK,GAAG,KAAKD,UAAL,CAAgBE,YAAhB,CAA6BtB,KAA7B,CAAd;;AACA,gBAAIqB,KAAJ,EAAW;AACTA,cAAAA,KAAK,CAACE,MAAN,GAAgB,GAAE,KAAKf,KAAM,EAA7B;AACD;AACF;AACF;;AAEMgB,QAAAA,wBAAwB,GAAE;AAC/B,cAAI,KAAKC,kBAAT,EAA6B;AACzB,kBAAMJ,KAAK,GAAG,KAAKI,kBAAL,CAAwBH,YAAxB,CAAqCtB,KAArC,CAAd;;AACA,gBAAIqB,KAAJ,EAAW;AACTA,cAAAA,KAAK,CAACE,MAAN,GAAgB,eAAc,KAAKf,KAAM,EAAzC;AACD;AACF;AACJ;;AAlDyC,O;;;;;iBACQ,I;;;;;;;iBACf,I;;;;;;;iBACQ,I;;;;;;;iBACG,G;;kCAiDhD;AACA;AACA","sourcesContent":["import { _decorator, Component, Game, Label, Node } from \"cc\";\r\nimport { GameManager, GameState } from \"./GameManager\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass(\"ScoreHandler\")\r\nexport class ScoreHandler extends Component {\r\n  @property(GameManager) gameManager: GameManager = null;\r\n  @property(Node) scoreLabel: Node = null;\r\n  @property(Node) gameOverScoreLabel: Node = null;\r\n  @property(Number) incrementInterval: number = 0.1; \r\n  \r\n  public score: number = 0;\r\n  private elapsedTime: number = 0;\r\n\r\n  public getScore() {\r\n    return this.score;\r\n  }\r\n\r\n  public resetScore() {\r\n    this.score = 0;\r\n    return this.score;\r\n  }\r\n\r\n  protected update(dt: number) {\r\n    if (this.gameManager.currentState != GameState.GAME_RUNNING) return;\r\n\r\n    this.elapsedTime += dt;\r\n    if (this.elapsedTime >= this.incrementInterval) {\r\n      this.elapsedTime -= this.incrementInterval;\r\n      this.incrementScore();\r\n      this.updateScoreLabel();\r\n    }\r\n  }\r\n\r\n  private incrementScore() {\r\n    this.score += 1;\r\n    // console.log(\"Score: \", this.score);\r\n  }\r\n\r\n  private updateScoreLabel() {\r\n    if (this.scoreLabel) {\r\n      const label = this.scoreLabel.getComponent(Label);\r\n      if (label) {\r\n        label.string = `${this.score}`;\r\n      }\r\n    }\r\n  }\r\n\r\n  public updategameOverScoreLabel(){\r\n    if (this.gameOverScoreLabel) {\r\n        const label = this.gameOverScoreLabel.getComponent(Label);\r\n        if (label) {\r\n          label.string = `Your Score: ${this.score}`;\r\n        }\r\n      }\r\n  }\r\n}\r\n\r\n//   public addScore(currentscore: number, value: number) {\r\n//     return (currentscore += value);\r\n//   }\r\n"]}