{"version":3,"sources":["file:///D:/CocosProjects/bionluk/muratcanko/SpaceGame/SpaceGame3D/assets/scripts/EnemyManager.ts"],"names":["_decorator","Component","instantiate","Prefab","randomRange","Vec3","ccclass","property","EnemyManager","Number","activeEnemies","Set","spawnDepth","enemyPool","onLoad","initializeEnemyPool","spawnEnemy","i","poolSize","enemy","enemyPrefab","active","node","addChild","push","console","log","getEnemyFromPool","spawnPos","spawnRangeX","spawnRangeY","setPosition","add","returnEnemyToPool","delete"],"mappings":";;;;;;;;;;;;;;;;AACEA,MAAAA,U,OAAAA,U;AACAC,MAAAA,S,OAAAA,S;AACAC,MAAAA,W,OAAAA,W;AAEAC,MAAAA,M,OAAAA,M;AACAC,MAAAA,W,OAAAA,W;AACAC,MAAAA,I,OAAAA,I;;;;;;;;;OAEI;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;8BAGjBQ,Y,WADZF,OAAO,CAAC,cAAD,C,UAELC,QAAQ,CAACJ,MAAD,C,UACRI,QAAQ,CAACE,MAAD,C,UACRF,QAAQ,CAACE,MAAD,C,UACRF,QAAQ,CAACE,MAAD,C,2BALX,MACaD,YADb,SACkCP,SADlC,CAC4C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAM1CS,aAN0C,GAMf,IAAIC,GAAJ,EANe;AAAA,eAO1CC,UAP0C,GAOrB,CAPqB;AAAA,eASlCC,SATkC,GASd,EATc;AAAA;;AAWhCC,QAAAA,MAAM,GAAS;AACvB,eAAKC,mBAAL;AACA,eAAKC,UAAL;AACD;;AAEOD,QAAAA,mBAAmB,GAAG;AAC5B,eAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKC,QAAzB,EAAmCD,CAAC,EAApC,EAAwC;AACtC,kBAAME,KAAK,GAAGjB,WAAW,CAAC,KAAKkB,WAAN,CAAzB;AACAD,YAAAA,KAAK,CAACE,MAAN,GAAe,KAAf;AACA,iBAAKC,IAAL,CAAUC,QAAV,CAAmBJ,KAAnB;AACA,iBAAKN,SAAL,CAAeW,IAAf,CAAoBL,KAApB;AACD;;AACDM,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKb,SAAjB;AACD;;AAEOc,QAAAA,gBAAgB,GAAgB;AACtC,eAAK,MAAMR,KAAX,IAAoB,KAAKN,SAAzB,EAAoC;AAClC,gBAAI,CAACM,KAAK,CAACE,MAAX,EAAmB;AACjB,qBAAOF,KAAP;AACD;AACF;;AACD,iBAAO,IAAP;AACD;;AAEDH,QAAAA,UAAU,GAAG;AACX,gBAAMG,KAAK,GAAG,KAAKQ,gBAAL,EAAd;AACA,cAAI,CAACR,KAAL,EAAY;AAEZ,gBAAMS,QAAQ,GAAG,IAAIvB,IAAJ,CACfD,WAAW,CAAC,CAAC,KAAKyB,WAAP,EAAoB,KAAKA,WAAzB,CADI,EAEfzB,WAAW,CAAC,CAAC,KAAK0B,WAAP,EAAoB,KAAKA,WAAzB,CAFI,EAGf,KAAKlB,UAHU,CAAjB;AAKAO,UAAAA,KAAK,CAACY,WAAN,CAAkBH,QAAlB;AACAT,UAAAA,KAAK,CAACE,MAAN,GAAe,IAAf;AAEA,eAAKX,aAAL,CAAmBsB,GAAnB,CAAuBb,KAAvB;AACD;;AACDc,QAAAA,iBAAiB,CAACd,KAAD,EAAc;AAC7BA,UAAAA,KAAK,CAACE,MAAN,GAAe,KAAf;AACA,eAAKX,aAAL,CAAmBwB,MAAnB,CAA0Bf,KAA1B;AACA,eAAKN,SAAL,CAAeW,IAAf,CAAoBL,KAApB;AACD;;AArDyC,O;;;;;iBACF,I;;;;;;;iBACH,E;;;;;;;iBACG,E;;;;;;;iBACA,E","sourcesContent":["import {\r\n  _decorator,\r\n  Component,\r\n  instantiate,\r\n  Node,\r\n  Prefab,\r\n  randomRange,\r\n  Vec3,\r\n} from \"cc\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass(\"EnemyManager\")\r\nexport class EnemyManager extends Component {\r\n  @property(Prefab) enemyPrefab: Prefab = null;\r\n  @property(Number) poolSize: number = 10;\r\n  @property(Number) spawnRangeX: number = 20;\r\n  @property(Number) spawnRangeY: number = 10;\r\n\r\n  activeEnemies: Set<Node> = new Set();\r\n  spawnDepth: number = 0;\r\n\r\n  private enemyPool: Node[] = [];\r\n\r\n  protected onLoad(): void {\r\n    this.initializeEnemyPool();\r\n    this.spawnEnemy()\r\n  }\r\n\r\n  private initializeEnemyPool() {\r\n    for (let i = 0; i < this.poolSize; i++) {\r\n      const enemy = instantiate(this.enemyPrefab);\r\n      enemy.active = false;\r\n      this.node.addChild(enemy);\r\n      this.enemyPool.push(enemy);\r\n    }\r\n    console.log(this.enemyPool);\r\n  }\r\n\r\n  private getEnemyFromPool(): Node | null {\r\n    for (const enemy of this.enemyPool) {\r\n      if (!enemy.active) {\r\n        return enemy;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  spawnEnemy() {\r\n    const enemy = this.getEnemyFromPool();\r\n    if (!enemy) return;\r\n\r\n    const spawnPos = new Vec3(\r\n      randomRange(-this.spawnRangeX, this.spawnRangeX),\r\n      randomRange(-this.spawnRangeY, this.spawnRangeY),\r\n      this.spawnDepth\r\n    );\r\n    enemy.setPosition(spawnPos);\r\n    enemy.active = true;\r\n\r\n    this.activeEnemies.add(enemy);\r\n  }\r\n  returnEnemyToPool(enemy: Node) {\r\n    enemy.active = false;\r\n    this.activeEnemies.delete(enemy);\r\n    this.enemyPool.push(enemy);\r\n  }\r\n}\r\n"]}