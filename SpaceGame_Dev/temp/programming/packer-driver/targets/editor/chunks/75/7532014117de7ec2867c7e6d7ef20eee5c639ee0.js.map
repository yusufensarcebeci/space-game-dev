{"version":3,"sources":["file:///D:/CocosProjects/bionluk/muratcanko/SpaceGame/SpaceGame3D/assets/scripts/GameManager.ts"],"names":["_decorator","Component","Enum","EnemyManager","SceneFrame","ccclass","property","GameState","GameManager","type","Number","currentState","LOADING","setState","newState","console","warn","gameReset","enemyManager","resetEnemyPool","sceneFrame","resetFramePool","increaseDifficulty","dt","difficultyMultiplier","maxDifficulty","difficultyIncreaseRate","update","GAME_RUNNING"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;;AACvBC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,U,iBAAAA,U;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;2BAElBO,S,0BAAAA,S;AAAAA,QAAAA,S,CAAAA,S;AAAAA,QAAAA,S,CAAAA,S;AAAAA,QAAAA,S,CAAAA,S;AAAAA,QAAAA,S,CAAAA,S;AAAAA,QAAAA,S,CAAAA,S;eAAAA,S;;;6BASCC,W,WADZH,OAAO,CAAC,aAAD,C,UAELC,QAAQ,CAAC;AAAEG,QAAAA,IAAI,EAAEP,IAAI,CAACK,SAAD;AAAZ,OAAD,C,UACRD,QAAQ,CAACI,MAAD,C,UACRJ,QAAQ,CAACI,MAAD,C,UACRJ,QAAQ,CAACI,MAAD,C,UAERJ,QAAQ;AAAA;AAAA,uC,UACRA,QAAQ;AAAA;AAAA,mC,2BARX,MACaE,WADb,SACiCP,SADjC,CAC2C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eASzCU,YATyC,GASfJ,SAAS,CAACK,OATK;AAAA;;AAWlCC,QAAAA,QAAQ,CAACC,QAAD,EAAsB;AACnC,eAAKH,YAAL,GAAoBG,QAApB;AACAC,UAAAA,OAAO,CAACC,IAAR,CAAa,sBAAb,EAAqCT,SAAS,CAAC,KAAKI,YAAN,CAA9C;AACD;;AAEMM,QAAAA,SAAS,GAAE;AAChB,eAAKC,YAAL,CAAkBC,cAAlB;AACA,eAAKC,UAAL,CAAgBC,cAAhB;AACD;;AAEOC,QAAAA,kBAAkB,CAACC,EAAD,EAAa;AACrC,cAAI,KAAKC,oBAAL,GAA4B,KAAKC,aAArC,EAAoD;AACpD,eAAKD,oBAAL,IAA6B,KAAKE,sBAAL,GAA8BH,EAA3D;AACD;;AAESI,QAAAA,MAAM,CAACJ,EAAD,EAAmB;AACjC,cAAI,KAAKZ,YAAL,KAAsBJ,SAAS,CAACqB,YAApC,EAAkD;AAChD,iBAAKN,kBAAL,CAAwBC,EAAxB;AACD;AACF;;AA9BwC,O;;;;;iBAEQ,C;;;;;;;iBACE,I;;;;;;;iBACT,C;;;;;;;iBAEW,I;;;;;;;iBACN,I","sourcesContent":["import { _decorator, Component, Enum, Node } from \"cc\";\r\nimport { EnemyManager } from \"./EnemyManager\";\r\nimport { SceneFrame } from \"./SceneFrame\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport enum GameState {\r\n  LOADING,\r\n  INIT,\r\n  GAME_START,\r\n  GAME_RUNNING,\r\n  GAME_OVER,\r\n}\r\n\r\n@ccclass(\"GameManager\")\r\nexport class GameManager extends Component {\r\n  @property({ type: Enum(GameState) })\r\n  @property(Number) difficultyMultiplier: number = 1;\r\n  @property(Number) difficultyIncreaseRate: number = 0.01;\r\n  @property(Number) maxDifficulty: number = 5;\r\n\r\n  @property(EnemyManager) enemyManager: EnemyManager = null;\r\n  @property(SceneFrame) sceneFrame: SceneFrame = null;\r\n\r\n  currentState: GameState = GameState.LOADING;\r\n\r\n  public setState(newState: GameState) {\r\n    this.currentState = newState;\r\n    console.warn(\"Current Game State: \", GameState[this.currentState]);\r\n  }\r\n\r\n  public gameReset(){\r\n    this.enemyManager.resetEnemyPool();\r\n    this.sceneFrame.resetFramePool();\r\n  }\r\n\r\n  private increaseDifficulty(dt: number) {\r\n    if (this.difficultyMultiplier > this.maxDifficulty) return;\r\n    this.difficultyMultiplier += this.difficultyIncreaseRate * dt;\r\n  }\r\n\r\n  protected update(dt: number): void {\r\n    if (this.currentState === GameState.GAME_RUNNING) {\r\n      this.increaseDifficulty(dt)\r\n    }\r\n  }\r\n}\r\n"]}