{"version":3,"sources":["file:///D:/CocosProjects/bionluk/muratcanko/SpaceGame/SpaceGame3D/assets/scripts/JoystickController.ts"],"names":["_decorator","Component","Node","UITransform","Vec3","ccclass","property","JoystickController","onLoad","console","log","node","name","on","EventType","TOUCH_MOVE","handleTouchMove","TOUCH_END","resetJoystickPosition","TOUCH_CANCEL","event","screen_pos","getLocation","uiTransform","getComponent","pos","convertToNodeSpaceAR","x","y","stick","setPosition"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAqCC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,I,OAAAA,I;;;;;;;;;OAC7E;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;oCAGjBO,kB,WADZF,OAAO,CAAC,oBAAD,C,UAELC,QAAQ,CAACJ,IAAD,C,UACRI,QAAQ,CAACJ,IAAD,C,2BAHX,MACaK,kBADb,SACwCN,SADxC,CACkD;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAIhDO,QAAAA,MAAM,GAAG;AACPC,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,IAAL,CAAUC,IAAtB;AAEA,eAAKD,IAAL,CAAUE,EAAV,CAAaX,IAAI,CAACY,SAAL,CAAeC,UAA5B,EAAuC,KAAKC,eAA5C,EAA4D,IAA5D;AACA,eAAKL,IAAL,CAAUE,EAAV,CAAaX,IAAI,CAACY,SAAL,CAAeG,SAA5B,EAAsC,KAAKC,qBAA3C,EAAiE,IAAjE;AACA,eAAKP,IAAL,CAAUE,EAAV,CAAaX,IAAI,CAACY,SAAL,CAAeK,YAA5B,EAAyC,KAAKD,qBAA9C,EAAoE,IAApE;AAED;;AAEOF,QAAAA,eAAe,CAAEI,KAAF,EAAqB;AACtC,cAAMC,UAAU,GAAGD,KAAK,CAACE,WAAN,EAAnB;AACA,cAAMC,WAAW,GAAG,KAAKZ,IAAL,CAAUa,YAAV,CAAuBrB,WAAvB,CAApB;AACA,cAAMsB,GAAG,GAAGF,WAAW,CAACG,oBAAZ,CAAiC,IAAItB,IAAJ,CAASiB,UAAU,CAACM,CAApB,EAAuBN,UAAU,CAACO,CAAlC,EAAqC,CAArC,CAAjC,CAAZ;AAEA,eAAKC,KAAL,CAAWC,WAAX,CAAuBL,GAAvB;AACL;;AACOP,QAAAA,qBAAqB,CAAEE,KAAF,EAAqB;AAChD,eAAKS,KAAL,CAAWC,WAAX,CAAuB,IAAI1B,IAAJ,CAAS,CAAT,EAAW,CAAX,EAAa,CAAb,CAAvB;AACD;;AAtB+C,O;;;;;iBACjB,I;;;;;;;iBACD,I","sourcesContent":["import { _decorator, Component, EventTouch, Input, input, Node, UITransform, Vec2, Vec3 } from \"cc\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass(\"JoystickController\")\r\nexport class JoystickController extends Component {\r\n  @property(Node) player: Node = null;\r\n  @property(Node) stick: Node = null;\r\n\r\n  onLoad() {\r\n    console.log(this.node.name);\r\n \r\n    this.node.on(Node.EventType.TOUCH_MOVE,this.handleTouchMove,this)\r\n    this.node.on(Node.EventType.TOUCH_END,this.resetJoystickPosition,this)\r\n    this.node.on(Node.EventType.TOUCH_CANCEL,this.resetJoystickPosition,this)\r\n    \r\n  }\r\n\r\n  private handleTouchMove (event : EventTouch){\r\n        const screen_pos = event.getLocation();\r\n        const uiTransform = this.node.getComponent(UITransform);\r\n        const pos = uiTransform.convertToNodeSpaceAR(new Vec3(screen_pos.x, screen_pos.y, 0));\r\n        \r\n        this.stick.setPosition(pos)\r\n  }\r\n  private resetJoystickPosition (event : EventTouch){\r\n    this.stick.setPosition(new Vec3(0,0,0))\r\n  }\r\n  \r\n\r\n \r\n}\r\n"]}