{"version":3,"sources":["file:///D:/CocosProjects/bionluk/muratcanko/SpaceGame/SpaceGame3D/assets/scripts/EnemyManager.ts"],"names":["_decorator","Component","instantiate","Prefab","randomRange","Vec3","ccclass","property","EnemyManager","Number","spawnDepth","enemyPool","onLoad","initializeEnemyPool","i","poolSize","enemy","enemyPrefab","active","node","addChild","push","console","log","spawnEnemy","availableEnemies","filter","length","warn","Math","floor","random","randomX","spawnRangeX","randomY","spawnRangeY","spawnPosition","setPosition","returnEnemyToPool"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;;;;;;;;;OAClE;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;8BAGjBQ,Y,WADZF,OAAO,CAAC,cAAD,C,UAELC,QAAQ,CAACJ,MAAD,C,UACRI,QAAQ,CAACE,MAAD,C,UACRF,QAAQ,CAACE,MAAD,C,UACRF,QAAQ,CAACE,MAAD,C,2BALX,MACaD,YADb,SACkCP,SADlC,CAC4C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAM1CS,UAN0C,GAMpB,CANoB;AAAA,eAQlCC,SARkC,GAQd,EARc;AAAA;;AAUhCC,QAAAA,MAAM,GAAS;AACvB,eAAKC,mBAAL;AACD;;AAEOA,QAAAA,mBAAmB,GAAG;AAC5B,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKC,QAAzB,EAAmCD,CAAC,EAApC,EAAwC;AACtC,gBAAME,KAAK,GAAGd,WAAW,CAAC,KAAKe,WAAN,CAAzB;AACAD,YAAAA,KAAK,CAACE,MAAN,GAAe,KAAf;AACA,iBAAKC,IAAL,CAAUC,QAAV,CAAmBJ,KAAnB;AACA,iBAAKL,SAAL,CAAeU,IAAf,CAAoBL,KAApB;AACD;;AACDM,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKZ,SAAjB;AACD;;AAEDa,QAAAA,UAAU,GAAG;AACX,cAAMC,gBAAgB,GAAG,KAAKd,SAAL,CAAee,MAAf,CAAsBV,KAAK,IAAI,CAACA,KAAK,CAACE,MAAtC,CAAzB;;AAEA,cAAIO,gBAAgB,CAACE,MAAjB,KAA4B,CAAhC,EAAmC;AACjCL,YAAAA,OAAO,CAACM,IAAR,CAAa,mCAAb;AACA;AACD;;AAED,cAAMZ,KAAK,GAAGS,gBAAgB,CAACI,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBN,gBAAgB,CAACE,MAA5C,CAAD,CAA9B;AACA,cAAMK,OAAO,GAAG5B,WAAW,CAAC,CAAC,KAAK6B,WAAP,EAAoB,KAAKA,WAAzB,CAA3B;AACA,cAAMC,OAAO,GAAG9B,WAAW,CAAC,CAAC,KAAK+B,WAAP,EAAoB,KAAKA,WAAzB,CAA3B;AACA,cAAMC,aAAa,GAAG,IAAI/B,IAAJ,CAAS2B,OAAT,EAAkBE,OAAlB,EAA2B,KAAKxB,UAAhC,CAAtB;AAEAM,UAAAA,KAAK,CAACqB,WAAN,CAAkBD,aAAlB;AACApB,UAAAA,KAAK,CAACE,MAAN,GAAe,IAAf;AACD,SAvCyC,CAyC1C;;;AACAoB,QAAAA,iBAAiB,CAACtB,KAAD,EAAc;AAC7BA,UAAAA,KAAK,CAACE,MAAN,GAAe,KAAf;AACAF,UAAAA,KAAK,CAACqB,WAAN,CAAkB,IAAIhC,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,CAAlB,EAF6B,CAES;AACvC;;AA7CyC,O;;;;;iBACF,I;;;;;;;iBACH,E;;;;;;;iBACG,E;;;;;;;iBACA,E","sourcesContent":["import { _decorator, Component, instantiate, Node, Prefab, randomRange, Vec3 } from \"cc\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass(\"EnemyManager\")\r\nexport class EnemyManager extends Component {\r\n  @property(Prefab) enemyPrefab: Prefab = null;\r\n  @property(Number) poolSize: number = 10;\r\n  @property(Number) spawnRangeX: number = 20;\r\n  @property(Number) spawnRangeY: number = 10;\r\n\r\n  spawnDepth : number = 0;\r\n\r\n  private enemyPool: Node[] = [];\r\n\r\n  protected onLoad(): void {\r\n    this.initializeEnemyPool();\r\n  }\r\n\r\n  private initializeEnemyPool() {\r\n    for (let i = 0; i < this.poolSize; i++) {\r\n      const enemy = instantiate(this.enemyPrefab);\r\n      enemy.active = false;\r\n      this.node.addChild(enemy);\r\n      this.enemyPool.push(enemy);\r\n    }\r\n    console.log(this.enemyPool);\r\n  }\r\n\r\n  spawnEnemy() {\r\n    const availableEnemies = this.enemyPool.filter(enemy => !enemy.active);\r\n\r\n    if (availableEnemies.length === 0) {\r\n      console.warn(\"No available enemies in the pool.\");\r\n      return;\r\n    }\r\n\r\n    const enemy = availableEnemies[Math.floor(Math.random() * availableEnemies.length)];\r\n    const randomX = randomRange(-this.spawnRangeX, this.spawnRangeX);\r\n    const randomY = randomRange(-this.spawnRangeY, this.spawnRangeY);\r\n    const spawnPosition = new Vec3(randomX, randomY, this.spawnDepth);\r\n\r\n    enemy.setPosition(spawnPosition);\r\n    enemy.active = true;\r\n  }\r\n\r\n  // Enemy'yi tekrar pool'a ekle\r\n  returnEnemyToPool(enemy: Node) {\r\n    enemy.active = false;\r\n    enemy.setPosition(new Vec3(0, 0, 0)); // İsteğe bağlı olarak pozisyonu sıfırla\r\n  }\r\n  \r\n}\r\n"]}