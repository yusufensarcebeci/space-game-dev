{"version":3,"sources":["file:///D:/CocosProjects/bionluk/muratcanko/SpaceGame/SpaceGame3D/assets/scripts/UIManager.ts"],"names":["_decorator","Component","Node","GameManager","GameState","ScoreHandler","EnemyManager","SceneFrame","Player","ccclass","property","UIManager","onLoad","handleLoading","scheduleOnce","handleInitScreen","onPlayButtonClicked","handleGameScreen","onRetryButtonClicked","enemyManager","resetEnemyPool","sceneFrame","resetFramePool","player","resetPlayer","gameManager","resetDifficulty","onHomeButtonClicked","hideAllScreens","initScreen","active","setState","INIT","loadingScreen","LOADING","gameScreen","GAME_RUNNING","scoreHandlerNode","scoreHandler","getComponent","resetScore","handleEndScreen","endScreen","GAME_OVER","updategameOverScoreLabel","rotateLoadSprite","dt","load","rotZ","eulerAngles","z","setRotationFromEuler","update","activity"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node } from \"cc\";\r\nimport { GameManager, GameState } from \"./GameManager\";\r\nimport { ScoreHandler } from \"./ScoreHandler\";\r\nimport { EnemyManager } from \"./EnemyManager\";\r\nimport { SceneFrame } from \"./SceneFrame\";\r\nimport { Player } from \"./Player\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass(\"UIManager\")\r\nexport class UIManager extends Component {\r\n  @property(GameManager) gameManager: GameManager = null;\r\n \r\n  @property(EnemyManager) enemyManager: EnemyManager = null;\r\n  @property(SceneFrame) sceneFrame: SceneFrame = null;\r\n  @property(Player) player: Player = null;\r\n\r\n  @property(Node) loadingScreen: Node = null;\r\n  @property(Node) initScreen: Node = null;\r\n  @property(Node) gameScreen: Node = null;\r\n  @property(Node) endScreen: Node = null;\r\n\r\n  @property(Node) scoreHandlerNode: Node = null;\r\n  @property(Node) load: Node = null;\r\n\r\n  protected onLoad(): void {\r\n    this.handleLoading();\r\n    this.scheduleOnce(() => {\r\n      this.handleInitScreen();\r\n    }, 2);\r\n  }\r\n\r\n  private onPlayButtonClicked() {\r\n    this.handleLoading();\r\n    this.scheduleOnce(() => {\r\n      this.handleGameScreen();\r\n    }, 2);\r\n  }\r\n\r\n  private onRetryButtonClicked() {\r\n    this.handleLoading();\r\n\r\n    this.enemyManager.resetEnemyPool();\r\n    this.sceneFrame.resetFramePool();\r\n    this.player.resetPlayer();\r\n    this.gameManager.resetDifficulty();\r\n\r\n    this.scheduleOnce(()=>{\r\n        this.handleGameScreen();\r\n    },2)\r\n  }\r\n\r\n  private onHomeButtonClicked() {\r\n    this.handleLoading();\r\n    \r\n    this.enemyManager.resetEnemyPool();\r\n    this.sceneFrame.resetFramePool();\r\n    this.player.resetPlayer();\r\n    this.gameManager.resetDifficulty();\r\n\r\n    this.scheduleOnce(()=>{\r\n        this.handleInitScreen();\r\n    },2)\r\n  }\r\n\r\n  public handleInitScreen() {\r\n    this.hideAllScreens();\r\n    if (this.initScreen) {\r\n      this.initScreen.active = true;\r\n      this.gameManager.setState(GameState.INIT);\r\n    }\r\n  }\r\n\r\n  public handleLoading() {\r\n    this.hideAllScreens();\r\n    if (this.loadingScreen) {\r\n      this.loadingScreen.active = true;\r\n      this.gameManager.setState(GameState.LOADING);\r\n    }\r\n  }\r\n\r\n  public handleGameScreen() {\r\n    this.hideAllScreens();\r\n    if (this.gameScreen) {\r\n      this.gameScreen.active = true;\r\n      this.gameManager.setState(GameState.GAME_RUNNING);\r\n\r\n      if (this.scoreHandlerNode) {\r\n        const scoreHandler = this.scoreHandlerNode.getComponent(ScoreHandler);\r\n        if (scoreHandler) {\r\n          scoreHandler.resetScore();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public handleEndScreen() {\r\n    this.hideAllScreens();\r\n    if (this.endScreen) {\r\n      this.endScreen.active = true;\r\n      this.gameManager.setState(GameState.GAME_OVER);\r\n      \r\n     \r\n      if (this.scoreHandlerNode) {\r\n        const scoreHandler = this.scoreHandlerNode.getComponent(ScoreHandler);\r\n        if (scoreHandler) {\r\n          scoreHandler.updategameOverScoreLabel();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private hideAllScreens() {\r\n    if (this.loadingScreen) this.loadingScreen.active = false;\r\n    if (this.initScreen) this.initScreen.active = false;\r\n    if (this.gameScreen) this.gameScreen.active = false;\r\n    if (this.endScreen) this.endScreen.active = false;\r\n  }\r\n\r\n  private rotateLoadSprite(dt: number) {\r\n    if (!this.load) return;\r\n    let rotZ = this.load.eulerAngles.z;\r\n    this.load.setRotationFromEuler(0, 0, rotZ - dt * 200);\r\n  }\r\n\r\n  protected update(dt: number): void {\r\n    let activity = this.loadingScreen.active;\r\n    if (activity) {\r\n      this.rotateLoadSprite(dt);\r\n    }\r\n  }\r\n}\r\n"]}